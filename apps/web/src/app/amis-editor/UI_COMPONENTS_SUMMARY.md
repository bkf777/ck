# Amis Agent ç”Ÿæˆå¼ UI ç»„ä»¶å¿«é€Ÿå‚è€ƒ

## ğŸ“¦ ç»„ä»¶æ¦‚è§ˆ

| ç»„ä»¶åç§°             | ç”¨é€”           | è§¦å‘æ—¶æœº                            | å…³é”®ç‰¹æ€§                                                |
| -------------------- | -------------- | ----------------------------------- | ------------------------------------------------------- |
| **DocRetrievalCard** | æ–‡æ¡£æ£€ç´¢ UI    | è°ƒç”¨ `retrieveDocumentation` å·¥å…·æ—¶ | æ˜¾ç¤ºæ£€ç´¢çŠ¶æ€ã€æ–‡æ¡£åˆ—è¡¨ã€ä»£ç ç¤ºä¾‹æ•°é‡                    |
| **TaskProgressCard** | ä»»åŠ¡è¿›åº¦è¿½è¸ª   | ä»»åŠ¡è§„åˆ’å®ŒæˆååŠæ¯æ¬¡ä»»åŠ¡æ‰§è¡Œæ—¶      | è¿›åº¦æ¡ã€ä»»åŠ¡åˆ—è¡¨ã€å®æ—¶çŠ¶æ€æ›´æ–°ã€ç»“æœé¢„è§ˆ                |
| **FinalResultCard**  | æœ€ç»ˆç»“æœå±•ç¤º   | é…ç½®ç”Ÿæˆå®Œæˆå                      | JSON é¢„è§ˆã€å¤åˆ¶æŒ‰é’®ã€åº”ç”¨åˆ°ç¼–è¾‘å™¨æŒ‰é’®ã€æ‰§è¡Œæ—¥å¿—         |
| **StatusBadge**      | çŠ¶æ€å¾½ç«        | ä½œä¸ºå­ç»„ä»¶è¢«å…¶ä»–ç»„ä»¶ä½¿ç”¨            | 5 ç§çŠ¶æ€ï¼šloadingã€completedã€errorã€executingã€pending |
| **Timeline**         | æ‰§è¡Œæ—¥å¿—æ—¶é—´çº¿ | åµŒå…¥åœ¨å…¶ä»–ç»„ä»¶ä¸­                    | æ—¶é—´é¡ºåºæ˜¾ç¤ºã€äº‹ä»¶ç±»å‹æ ‡è®°ã€å¯æŠ˜å                       |

## ğŸ¨ UI ç»„ä»¶æ•°æ®æµ

```
ç”¨æˆ·è¯·æ±‚ "åˆ›å»ºæ³¨å†Œè¡¨å•"
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. planner_node (ä»»åŠ¡è§„åˆ’)          â”‚
â”‚    ç”Ÿæˆä»»åŠ¡åˆ—è¡¨                      â”‚
â”‚    â†“                                â”‚
â”‚    è§¦å‘: showTaskProgress UI        â”‚
â”‚    æ˜¾ç¤º: 0/5 ä»»åŠ¡è¿›åº¦                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. executor_node (æ‰§è¡Œä»»åŠ¡)         â”‚
â”‚    æ‰§è¡Œ task-1: ç”¨æˆ·åè¾“å…¥æ¡†         â”‚
â”‚    â†“                                â”‚
â”‚    è§¦å‘: retrieveDocumentation      â”‚
â”‚    æ˜¾ç¤º: DocRetrievalCard           â”‚
â”‚    æ£€ç´¢: docs/components/form/...   â”‚
â”‚    â†“                                â”‚
â”‚    æ›´æ–°: TaskProgressCard (1/5)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. executor_node (ç»§ç»­æ‰§è¡Œ)         â”‚
â”‚    task-2: å¯†ç è¾“å…¥æ¡†                â”‚
â”‚    task-3: é‚®ç®±è¾“å…¥æ¡†                â”‚
â”‚    task-4: æäº¤æŒ‰é’®                  â”‚
â”‚    â†“                                â”‚
â”‚    å®æ—¶æ›´æ–°: TaskProgressCard        â”‚
â”‚    æ˜¾ç¤º: 2/5 â†’ 3/5 â†’ 4/5            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. composer_node (ç»¼åˆç»“æœ)          â”‚
â”‚    ç»„è£…å®Œæ•´è¡¨å•é…ç½®                  â”‚
â”‚    â†“                                â”‚
â”‚    è§¦å‘: showFinalResult UI         â”‚
â”‚    æ˜¾ç¤º: FinalResultCard            â”‚
â”‚    - JSON é…ç½®é¢„è§ˆ                   â”‚
â”‚    - å¤åˆ¶æŒ‰é’®                        â”‚
â”‚    - åº”ç”¨åˆ°ç¼–è¾‘å™¨æŒ‰é’®                â”‚
â”‚    - æ‰§è¡Œæ—¥å¿—æ—¶é—´çº¿                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
ç”¨æˆ·ç‚¹å‡» "åº”ç”¨åˆ°ç¼–è¾‘å™¨"
    â†“
amis ç¼–è¾‘å™¨æ›´æ–°æ˜¾ç¤ºæ–°è¡¨å•
```

## ğŸ”§ å¿«é€Ÿé›†æˆä»£ç 

### æ–¹å¼ä¸€ï¼šåœ¨ page.tsx ä¸­æ³¨å†Œ Copilot Actions

```typescript
// åœ¨ AmisEditorPage ç»„ä»¶ä¸­æ·»åŠ 

useCopilotAction({
  name: "retrieveDocumentation",
  description: "æ£€ç´¢ amis ç›¸å…³æ–‡æ¡£",
  available: "enabled",
  parameters: [
    { name: "query", type: "string", required: true },
    { name: "taskType", type: "string", required: true },
  ],
  render: ({ args, status, result }) => (
    <DocRetrievalCard
      query={args.query}
      taskType={args.taskType}
      status={
        status === "running"
          ? "loading"
          : status === "completed"
          ? "completed"
          : "error"
      }
      result={result}
    />
  ),
});

useCopilotAction({
  name: "showTaskProgress",
  description: "æ˜¾ç¤ºä»»åŠ¡è§„åˆ’è¿›åº¦",
  available: "enabled",
  parameters: [
    { name: "tasks", type: "array", required: true },
    { name: "currentTaskIndex", type: "number", required: true },
  ],
  render: ({ args }) => (
    <TaskProgressCard
      tasks={args.tasks}
      currentTaskIndex={args.currentTaskIndex}
    />
  ),
});

useCopilotAction({
  name: "showFinalResult",
  description: "æ˜¾ç¤ºæœ€ç»ˆé…ç½®ç»“æœ",
  available: "enabled",
  parameters: [
    { name: "finalJson", type: "object", required: true },
    { name: "executionLog", type: "array", required: false },
  ],
  render: ({ args }) => (
    <FinalResultCard
      finalJson={args.finalJson}
      executionLog={args.executionLog}
    />
  ),
  handler: ({ finalJson }) => {
    updateSchema(finalJson);
    setSchema(finalJson);
  },
});
```

### æ–¹å¼äºŒï¼šåœ¨ Agent ä¸­è§¦å‘ UI æ›´æ–°

```typescript
// åœ¨ planner_node ä¸­
const progressMessage = new AIMessage({
  content: "ä»»åŠ¡è§„åˆ’å®Œæˆ",
  tool_calls: [
    {
      name: "showTaskProgress",
      args: { tasks, currentTaskIndex: 0 },
      id: `progress_${Date.now()}`,
    },
  ],
});

// åœ¨ executor_node ä¸­
const progressMessage = new AIMessage({
  content: `å®Œæˆä»»åŠ¡ ${currentIndex + 1}/${tasks.length}`,
  tool_calls: [
    {
      name: "showTaskProgress",
      args: { tasks, currentTaskIndex: currentIndex + 1 },
      id: `progress_${Date.now()}`,
    },
  ],
});

// åœ¨ composer_node ä¸­
const resultMessage = new AIMessage({
  content: "é…ç½®ç”Ÿæˆå®Œæˆ",
  tool_calls: [
    {
      name: "showFinalResult",
      args: {
        finalJson,
        executionLog: state.executionLog || [],
      },
      id: `result_${Date.now()}`,
    },
  ],
});
```

## ğŸ¯ å…³é”® Props è¯´æ˜

### DocRetrievalCard Props

| å±æ€§     | ç±»å‹                                | å¿…éœ€ | è¯´æ˜                                 |
| -------- | ----------------------------------- | ---- | ------------------------------------ |
| query    | string                              | âœ…   | æ£€ç´¢å…³é”®è¯                           |
| taskType | string                              | âœ…   | ä»»åŠ¡ç±»å‹                             |
| status   | "loading" \| "completed" \| "error" | âœ…   | æ£€ç´¢çŠ¶æ€                             |
| result   | object                              | âŒ   | æ£€ç´¢ç»“æœï¼ˆåŒ…å« documentsã€count ç­‰ï¼‰ |

### TaskProgressCard Props

| å±æ€§             | ç±»å‹   | å¿…éœ€ | è¯´æ˜                    |
| ---------------- | ------ | ---- | ----------------------- |
| tasks            | Task[] | âœ…   | ä»»åŠ¡æ•°ç»„                |
| currentTaskIndex | number | âœ…   | å½“å‰ä»»åŠ¡ç´¢å¼•ï¼ˆ0-basedï¼‰ |

### FinalResultCard Props

| å±æ€§         | ç±»å‹             | å¿…éœ€ | è¯´æ˜                      |
| ------------ | ---------------- | ---- | ------------------------- |
| finalJson    | object           | âœ…   | æœ€ç»ˆç”Ÿæˆçš„ amis JSON é…ç½® |
| executionLog | ExecutionEvent[] | âŒ   | æ‰§è¡Œæ—¥å¿—æ•°ç»„              |

## ğŸ¨ é¢œè‰²æ–¹æ¡ˆ

| ç”¨é€”         | ä¸»è‰²         | è¾…è‰²              | çŠ¶æ€è‰²          |
| ------------ | ------------ | ----------------- | --------------- |
| **æ–‡æ¡£æ£€ç´¢** | bg-blue-50   | border-blue-500   | text-blue-600   |
| **ä»»åŠ¡æ‰§è¡Œ** | bg-purple-50 | border-purple-300 | text-purple-600 |
| **æˆåŠŸå®Œæˆ** | bg-green-50  | border-green-300  | text-green-600  |
| **é”™è¯¯æç¤º** | bg-red-50    | border-red-200    | text-red-600    |
| **ç­‰å¾…çŠ¶æ€** | bg-gray-50   | border-gray-200   | text-gray-600   |

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

1. **å®æ—¶æ›´æ–°**: æ¯ä¸ªä»»åŠ¡å®Œæˆåç«‹å³æ›´æ–° `TaskProgressCard`ï¼Œä¿æŒç”¨æˆ·æ„ŸçŸ¥è¿›åº¦
2. **é”™è¯¯å¤„ç†**: ç¡®ä¿æ¯ä¸ªå¤±è´¥çš„ task éƒ½æœ‰ `errorMessage`ï¼ŒUI ä¼šè‡ªåŠ¨æ˜¾ç¤º
3. **ç»“æœé¢„è§ˆ**: ä½¿ç”¨ `<details>` æ ‡ç­¾è®©ç”¨æˆ·æŒ‰éœ€æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
4. **æ“ä½œåé¦ˆ**: é‡è¦æ“ä½œï¼ˆå¤åˆ¶ã€åº”ç”¨ï¼‰æä¾›è§†è§‰åé¦ˆï¼ˆé¢œè‰²å˜åŒ–ã€ç¦ç”¨ç­‰ï¼‰
5. **å“åº”å¼è®¾è®¡**: æ‰€æœ‰ç»„ä»¶éƒ½ä½¿ç”¨ Tailwind å“åº”å¼ç±»ï¼Œé€‚é…ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯

## ğŸ“± ç»„ä»¶é¢„è§ˆ

### DocRetrievalCard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“š æ–‡æ¡£æ£€ç´¢          [â³ å¤„ç†ä¸­]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æŸ¥è¯¢å…³é”®è¯ï¼šè¾“å…¥æ¡†                   â”‚
â”‚ ä»»åŠ¡ç±»å‹ï¼šform-item-input-text       â”‚
â”‚                                       â”‚
â”‚ â³ æ­£åœ¨æ£€ç´¢ç›¸å…³æ–‡æ¡£...               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### TaskProgressCard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ ä»»åŠ¡è§„åˆ’                2/5       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 40%          â”‚
â”‚                                       â”‚
â”‚ âœ“ 1. ç”Ÿæˆç”¨æˆ·åè¾“å…¥æ¡†                â”‚
â”‚   [æŸ¥çœ‹ç”Ÿæˆç»“æœ â–¼]                   â”‚
â”‚                                       â”‚
â”‚ âš™ï¸ 2. ç”Ÿæˆå¯†ç è¾“å…¥æ¡†  [æ­£åœ¨ç”Ÿæˆ...]  â”‚
â”‚                                       â”‚
â”‚ â¸ï¸ 3. ç”Ÿæˆé‚®ç®±è¾“å…¥æ¡†                 â”‚
â”‚                                       â”‚
â”‚ â¸ï¸ 4. ç”Ÿæˆæäº¤æŒ‰é’®                   â”‚
â”‚                                       â”‚
â”‚ â¸ï¸ 5. ç»„è£…è¡¨å•                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### FinalResultCard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‰ é…ç½®ç”Ÿæˆå®Œæˆ                       â”‚
â”‚    amis JSON å·²å‡†å¤‡å°±ç»ª              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“‹ å¤åˆ¶ JSON]  [âœ¨ åº”ç”¨åˆ°ç¼–è¾‘å™¨]    â”‚
â”‚                                       â”‚
â”‚ â–¼ ğŸ“„ æŸ¥çœ‹å®Œæ•´é…ç½®                    â”‚
â”‚ {                                    â”‚
â”‚   "type": "page",                    â”‚
â”‚   "body": { ... }                    â”‚
â”‚ }                                    â”‚
â”‚                                       â”‚
â”‚ â–¼ ğŸ“Š æ‰§è¡Œæ—¥å¿— (12 æ¡è®°å½•)            â”‚
â”‚ 16:30:15 [task_start] ä»»åŠ¡è§„åˆ’å®Œæˆ   â”‚
â”‚ 16:30:20 [doc_retrieval] æ‰¾åˆ°3ä¸ªæ–‡æ¡£ â”‚
â”‚ 16:30:25 [task_complete] ä»»åŠ¡1å®Œæˆ   â”‚
â”‚ ...                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” æ•…éšœæ’æŸ¥æ¸…å•

- [ ] æ£€æŸ¥ `available: "enabled"` æ˜¯å¦è®¾ç½®
- [ ] æ£€æŸ¥ `render` å‡½æ•°æ˜¯å¦æ­£ç¡®è¿”å› JSX
- [ ] æ£€æŸ¥ agent çŠ¶æ€æ˜¯å¦æ­£ç¡®æ›´æ–°
- [ ] æ£€æŸ¥ tool_calls çš„å‚æ•°åç§°æ˜¯å¦åŒ¹é…
- [ ] æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
- [ ] æ£€æŸ¥ Tailwind CSS ç±»åæ˜¯å¦æ­£ç¡®
- [ ] æ£€æŸ¥æ•°æ®ç±»å‹æ˜¯å¦ä¸ props å®šä¹‰åŒ¹é…

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å®Œæ•´ä½¿ç”¨æŒ‡å—](./GENERATIVE_UI_GUIDE.md) - è¯¦ç»†çš„é›†æˆæ­¥éª¤å’Œç¤ºä¾‹
- [CopilotKit æ–‡æ¡£](https://docs.copilotkit.ai) - ç”Ÿæˆå¼ UI åŸç†
- [amis æ–‡æ¡£](https://aisuda.bce.baidu.com/amis/zh-CN/components/index) - amis ç»„ä»¶é…ç½®
